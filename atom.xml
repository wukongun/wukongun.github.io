<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://wukongun.github.io</id>
    <title>Andy</title>
    <updated>2020-06-03T02:59:22.304Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://wukongun.github.io"/>
    <link rel="self" href="https://wukongun.github.io/atom.xml"/>
    <subtitle>è®°å½•ç‚¹æ»´</subtitle>
    <logo>https://wukongun.github.io/images/avatar.png</logo>
    <icon>https://wukongun.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, Andy</rights>
    <entry>
        <title type="html"><![CDATA[weak_entry_tæ•°æ®ç»“æ„åˆ†æ]]></title>
        <id>https://wukongun.github.io/post/weak_entry_t-shu-ju-jie-gou-fen-xi/</id>
        <link href="https://wukongun.github.io/post/weak_entry_t-shu-ju-jie-gou-fen-xi/">
        </link>
        <updated>2019-02-14T13:11:54.000Z</updated>
        <content type="html"><![CDATA[<h3 id="weak_entry_t-æ˜¯-weakå¯¹åº”çš„å†…å­˜ç»“æ„">weak_entry_t æ˜¯ weakå¯¹åº”çš„å†…å­˜ç»“æ„</h3>
<p>123123123123123132</p>
<pre><code class="language-c++">struct weak_entry_t {
    DisguisedPtr&lt;objc_object&gt; referent;
    union {
        struct {
            weak_referrer_t *referrers;
            uintptr_t        out_of_line_ness : 2;
            uintptr_t        num_refs : PTR_MINUS_2;
            uintptr_t        mask;
            uintptr_t        max_hash_displacement;
        };
        struct {
            // out_of_line_ness field is low bits of inline_referrers[1]
            weak_referrer_t  inline_referrers[WEAK_INLINE_COUNT];
        };
    };

    bool out_of_line() {
        return (out_of_line_ness == REFERRERS_OUT_OF_LINE);
    }

    weak_entry_t&amp; operator=(const weak_entry_t&amp; other) {
        memcpy(this, &amp;other, sizeof(other));
        return *this;
    }

    weak_entry_t(objc_object *newReferent, objc_object **newReferrer)
        : referent(newReferent)
    {
        inline_referrers[0] = newReferrer;
        for (int i = 1; i &lt; WEAK_INLINE_COUNT; i++) {
            inline_referrers[i] = nil;
        }
    }
};
</code></pre>
<p>weak_entry_tå†…éƒ¨ä¼˜åŒ–è®¾è®¡ï¼š<br>
ä¸€ä¸ªå¯¹è±¡å¯¹åº”çš„å¼±å¼•ç”¨æ•°ç›®è¾ƒå°‘çš„è¯(&lt;=WEAK_INLINE_COUNTï¼ŒruntimeæŠŠè¿™ä¸ªå€¼è®¾ç½®ä¸º4)ï¼Œåˆ™å…¶å¼±å¼•ç”¨ä¼šè¢«ä¾æ¬¡ä¿å­˜åˆ°ä¸€ä¸ªinlineæ•°ç»„é‡Œã€‚è¿™ä¸ªinlineæ•°ç»„çš„å†…å­˜ä¼šåœ¨weak_entry_tåˆå§‹åŒ–çš„æ—¶å€™ä¸€å¹¶åˆ†é…å¥½ï¼Œè€Œä¸æ˜¯éœ€è¦ç”¨åˆ°çš„æ—¶å€™å†å»ç”³è¯·æ–°çš„å†…å­˜ç©ºé—´ï¼Œä»è€Œè¾¾åˆ°æåˆ°è¿è¡Œæ•ˆç‡çš„ç›®çš„ã€‚</p>
<p>æ­¤å¤–ï¼Œunionä¸­çš„ä¸¤ä¸ªstructæ˜¯å…±äº«åŒä¸€å—å†…å­˜çš„ï¼Œå¦‚æœä¸ä½¿ç”¨inlineæ•°ç»„ï¼Œè€Œç›´æ¥ä½¿ç”¨HashTableçš„æ–¹å¼æ¥å®ç°ï¼Œé‚£ä¹ˆnum_refsï¼Œmaskå’Œmax_hash_displacementè¿™äº›å˜é‡éƒ½éœ€è¦å•ç‹¬çš„å­˜å‚¨ç©ºé—´ï¼Œä¼šä½¿ç”¨æ›´å¤šçš„å†…å­˜ã€‚ç»¼ä¸Šï¼Œä½¿ç”¨inlineæ•°ç»„åœ¨èŠ‚çº¦ä¸€å®šå†…å­˜ç©ºé—´çš„åŒæ—¶è¿˜ç›¸å¯¹æé«˜äº†è¿è¡Œæ•ˆç‡ã€‚</p>
<p>out_of_line_nesså ç”¨çš„æ˜¯inline_referrers[1]æœ€ä½ä¸¤ä½çš„ç©ºé—´ï¼Œä¹Ÿæ˜¯weak_entry_tå½“å‰ä½¿ç”¨inlineæ•°ç»„è¿˜æ˜¯outlineæ•°ç»„(ä¹Ÿå°±æ˜¯HashTableçš„å®ç°)çš„æ ‡è®°ä½ã€‚</p>
<p>å¯¹weak_entry_tä¸»è¦æ“ä½œçš„å‡½æ•°æ˜¯grow_refs_and_insertå’Œappend_referrer</p>
<p>append_referrerå‡½æ•°æ¥ä¸ºä¸€ä¸ªå¯¹è±¡ä¿å­˜æ–°çš„å¼±å¼•ç”¨</p>
<pre><code class="language-c++">static void append_referrer(weak_entry_t *entry, objc_object **new_referrer)
{
    if (! entry-&gt;out_of_line()) {
        // Try to insert inline.
        for (size_t i = 0; i &lt; WEAK_INLINE_COUNT; i++) {
            if (entry-&gt;inline_referrers[i] == nil) {
                entry-&gt;inline_referrers[i] = new_referrer;
                return;
            }
        }

        // Couldn't insert inline. Allocate out of line.
        weak_referrer_t *new_referrers = (weak_referrer_t *)
            calloc(WEAK_INLINE_COUNT, sizeof(weak_referrer_t));
        // This constructed table is invalid, but grow_refs_and_insert
        // will fix it and rehash it.
        for (size_t i = 0; i &lt; WEAK_INLINE_COUNT; i++) {
            new_referrers[i] = entry-&gt;inline_referrers[i];
        }
        entry-&gt;referrers = new_referrers;
        entry-&gt;num_refs = WEAK_INLINE_COUNT;
        entry-&gt;out_of_line_ness = REFERRERS_OUT_OF_LINE;
        entry-&gt;mask = WEAK_INLINE_COUNT-1;
        entry-&gt;max_hash_displacement = 0;
    }

    assert(entry-&gt;out_of_line());

    if (entry-&gt;num_refs &gt;= TABLE_SIZE(entry) * 3/4) {
        return grow_refs_and_insert(entry, new_referrer);
    }
    size_t begin = w_hash_pointer(new_referrer) &amp; (entry-&gt;mask);
    size_t index = begin;
    size_t hash_displacement = 0;
    while (entry-&gt;referrers[index] != nil) {
        hash_displacement++;
        index = (index+1) &amp; entry-&gt;mask;
        if (index == begin) bad_weak_table(entry);
    }
    if (hash_displacement &gt; entry-&gt;max_hash_displacement) {
        entry-&gt;max_hash_displacement = hash_displacement;
    }
    weak_referrer_t &amp;ref = entry-&gt;referrers[index];
    ref = new_referrer;
    entry-&gt;num_refs++;
}
</code></pre>
<ul>
<li>
<p>append_referrerå‡½æ•°é¦–å…ˆå¤„ç†weak_entry_tè¿˜åœ¨ä½¿ç”¨inlineæ•°ç»„çš„æƒ…å†µã€‚é¦–å…ˆå°è¯•åƒinlineæ•°ç»„ä¸­æ’å…¥ä¸€ä¸ªæ–°çš„å¼±å¼•ç”¨ï¼Œå¦‚æœinlineæ•°ç»„å·²æ»¡ï¼Œé‚£å°±åˆ›å»ºä¸€ä¸ªWEAK_INLINE_COUNTå¤§å°çš„æ–°æ•°ç»„ï¼Œæ”¹ç”¨outlineçš„æ–¹å¼ï¼Œå°†inlineæ•°ç»„ä¸­çš„å…ƒç´ ä¾æ¬¡æ‹·è´è¿‡æ¥ã€‚</p>
</li>
<li>
<p>å‡½æ•°çš„ååŠéƒ¨åˆ†å¤„ç†ä½¿ç”¨outlineæ•°ç»„çš„æƒ…å†µï¼Œå¦‚æœoutlineæ•°ç»„çš„ä½¿ç”¨ç‡åœ¨75%åŠä»¥ä¸Šï¼Œé‚£ä¹ˆè°ƒç”¨grow_refs_and_insertå‡½æ•°è¿›è¡Œæ‰©å……ï¼Œå¹¶ä¸”æ’å…¥æ–°çš„å¼±å¼•ç”¨ã€‚å¦åˆ™å°±ç›´æ¥è¿›è¡Œhashè¿ç®—æ’å…¥ï¼Œè¿‡ç¨‹å’Œweak_table_tçš„æ’å…¥è¿‡ç¨‹åŸºæœ¬ç›¸åŒã€‚</p>
</li>
</ul>
<pre><code class="language-c++">__attribute__((noinline, used))
static void grow_refs_and_insert(weak_entry_t *entry, 
                                 objc_object **new_referrer)
{
    assert(entry-&gt;out_of_line());

    size_t old_size = TABLE_SIZE(entry);
    size_t new_size = old_size ? old_size * 2 : 8;

    size_t num_refs = entry-&gt;num_refs;
    weak_referrer_t *old_refs = entry-&gt;referrers;
    entry-&gt;mask = new_size - 1;
    
    entry-&gt;referrers = (weak_referrer_t *)
        calloc(TABLE_SIZE(entry), sizeof(weak_referrer_t));
    entry-&gt;num_refs = 0;
    entry-&gt;max_hash_displacement = 0;
    
    for (size_t i = 0; i &lt; old_size &amp;&amp; num_refs &gt; 0; i++) {
        if (old_refs[i] != nil) {
            append_referrer(entry, old_refs[i]);
            num_refs--;
        }
    }
    // Insert
    append_referrer(entry, new_referrer);
    if (old_refs) free(old_refs);
}
</code></pre>
<p>å‡½æ•°é¦–å…ˆå¯¹outlineæ•°ç»„è¿›è¡Œæ‰©å……ï¼Œå®¹é‡æ˜¯åŸæ¥çš„ä¸¤å€ã€‚è€Œåä¾æ¬¡å°†è€æ•°ç»„ä¸­çš„å…ƒç´ hashæ’å…¥åˆ°æ–°æ•°ç»„ä¸­ï¼Œæœ€ç»ˆhashæ’å…¥æ–°çš„å¼•ç”¨ã€‚</p>
<pre><code class="language-c++">static void remove_referrer(weak_entry_t *entry, objc_object **old_referrer)
{
    if (! entry-&gt;out_of_line()) {
        for (size_t i = 0; i &lt; WEAK_INLINE_COUNT; i++) {
            if (entry-&gt;inline_referrers[i] == old_referrer) {
                entry-&gt;inline_referrers[i] = nil;
                return;
            }
        }
        _objc_inform(&quot;Attempted to unregister unknown __weak variable &quot;
                     &quot;at %p. This is probably incorrect use of &quot;
                     &quot;objc_storeWeak() and objc_loadWeak(). &quot;
                     &quot;Break on objc_weak_error to debug.\n&quot;, 
                     old_referrer);
        objc_weak_error();
        return;
    }

    size_t begin = w_hash_pointer(old_referrer) &amp; (entry-&gt;mask);
    size_t index = begin;
    size_t hash_displacement = 0;
    while (entry-&gt;referrers[index] != old_referrer) {
        index = (index+1) &amp; entry-&gt;mask;
        if (index == begin) bad_weak_table(entry);
        hash_displacement++;
        if (hash_displacement &gt; entry-&gt;max_hash_displacement) {
            _objc_inform(&quot;Attempted to unregister unknown __weak variable &quot;
                         &quot;at %p. This is probably incorrect use of &quot;
                         &quot;objc_storeWeak() and objc_loadWeak(). &quot;
                         &quot;Break on objc_weak_error to debug.\n&quot;, 
                         old_referrer);
            objc_weak_error();
            return;
        }
    }
    entry-&gt;referrers[index] = nil;
    entry-&gt;num_refs--;
}
</code></pre>
<ul>
<li>remove_referrerå‡½æ•°è´Ÿè´£åˆ é™¤ä¸€ä¸ªå¼±å¼•ç”¨ã€‚å‡½æ•°é¦–å…ˆå¤„ç†inlineæ•°ç»„çš„æƒ…å†µï¼Œç›´æ¥å°†å¯¹åº”çš„å¼±å¼•ç”¨é¡¹ç½®ç©ºã€‚å¦‚æœä½¿ç”¨äº†outlineæ•°ç»„ï¼Œåˆ™é€šè¿‡hashæ‰¾åˆ°è¦åˆ é™¤çš„é¡¹ï¼Œå¹¶ç›´æ¥åˆ é™¤ã€‚</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[weak_table_t insert referent remove]]></title>
        <id>https://wukongun.github.io/post/weak_table_t-insert-referent-remove/</id>
        <link href="https://wukongun.github.io/post/weak_table_t-insert-referent-remove/">
        </link>
        <updated>2019-02-13T13:51:44.000Z</updated>
        <content type="html"><![CDATA[<h2 id="add-new_entry-to-the-objects-table-of-weak-references">Add new_entry to the object's table of weak references.</h2>
<pre><code class="language-c++">/** 
 * Add new_entry to the object's table of weak references.
 * Does not check whether the referent is already in the table.
 */
static void weak_entry_insert(weak_table_t *weak_table, weak_entry_t *new_entry)
{
    weak_entry_t *weak_entries = weak_table-&gt;weak_entries;
    assert(weak_entries != nil);

    size_t begin = hash_pointer(new_entry-&gt;referent) &amp; (weak_table-&gt;mask);
    size_t index = begin;
    size_t hash_displacement = 0;
    while (weak_entries[index].referent != nil) {
        //è¯´æ˜å“ˆå¸Œå†²çªäº†
        index = (index+1) &amp; weak_table-&gt;mask;
        if (index == begin) bad_weak_table(weak_entries);
        hash_displacement++;
    }

    weak_entries[index] = *new_entry;
    weak_table-&gt;num_entries++;
    //ä¸æ˜¯å¾ˆæ‡‚ä¸ºä»€ä¹ˆè¦è®°å½•åç§»é‡
    if (hash_displacement &gt; weak_table-&gt;max_hash_displacement) {
        weak_table-&gt;max_hash_displacement = hash_displacement;
    }
}
</code></pre>
<blockquote>
<p>hash_pointeræ˜¯å¯¹å¼•ç”¨(æŒ‡é’ˆ)çš„hashå‡½æ•°</p>
</blockquote>
<blockquote>
<p>weak_tableçš„sizeä¿æŒæ˜¯2çš„Næ¬¡æ–¹ï¼Œè€Œmaskçš„å€¼ä¸ºsize - 1ï¼Œæ‰€ä»¥maskçš„äºŒè¿›åˆ¶åNä½éƒ½æ˜¯1ï¼Œè€Œä¹‹å‰éƒ½æ˜¯0ï¼Œç±»ä¼¼äº00000111ã€‚æ‰€ä»¥ä¸maskä¸æ“ä½œåçš„å€¼è‚¯å®šä¼šåœ¨[0,mask]è¿™ä¸ªåŒºé—´å†…ï¼Œä¹Ÿæ­£å¥½æ˜¯weak_table<br>
å®é™…çš„åˆæ³•å†…å­˜ç©ºé—´ã€‚</p>
</blockquote>
<blockquote>
<p>å¦‚æœå‘ç”Ÿäº†hashç¢°æ’çš„è¯ï¼Œå°†ä¼šä¾æ¬¡å‘ä¸‹å¯»æ‰¾ç©ºä½ï¼Œå¹¶ä¸”ç”¨max_hash_displacementæ¥è®°å½•æ•´ä¸ªweak_tableæœ€å¤§çš„åç§»é‡ã€‚</p>
</blockquote>
<blockquote>
<p>è§£å†³å“ˆå¸Œå†²çªçš„æ–¹æ³•æ˜¯å¼€æ”¾åœ°å€æ³•</p>
</blockquote>
<p>å¼€æ”¾åœ°å€æ³•æœ‰ä¸ªéå¸¸å…³é”®çš„ç‰¹å¾ï¼Œå°±æ˜¯æ‰€æœ‰è¾“å…¥çš„å…ƒç´ å…¨éƒ¨å­˜æ”¾åœ¨å“ˆå¸Œè¡¨é‡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒä¹‰è¯å†²çªçš„è§£å†³æ˜¯ä¸éœ€è¦ä»»ä½•çš„é“¾è¡¨æ¥å®ç°çš„(é“¾åœ°å€æ³•)ï¼Œæ¢å¥è¯è¯´ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå“ˆå¸Œè¡¨çš„è£…è½½å› å­ä¸ä¼šè¶…è¿‡1ã€‚å®ƒçš„å®ç°æ˜¯åœ¨æ’å…¥ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œå…ˆé€šè¿‡å“ˆå¸Œå‡½æ•°è¿›è¡Œåˆ¤æ–­ï¼Œè‹¥æ˜¯å‘ç”Ÿå“ˆå¸Œå†²çªï¼Œå°±ä»¥å½“å‰åœ°å€ä¸ºåŸºå‡†ï¼Œæ ¹æ®å†å¯»å€çš„æ–¹æ³•ï¼ˆæ¢æŸ¥åºåˆ—ï¼‰ï¼Œå»å¯»æ‰¾ä¸‹ä¸€ä¸ªåœ°å€ï¼Œè‹¥å‘ç”Ÿå†²çªå†å»å¯»æ‰¾ï¼Œç›´è‡³æ‰¾åˆ°ä¸€ä¸ªä¸ºç©ºçš„åœ°å€ä¸ºæ­¢ã€‚æ‰€ä»¥è¿™ç§æ–¹æ³•åˆç§°ä¸ºå†æ•£åˆ—æ³•ã€‚</p>
<h3 id="weak_table_té‡‡ç”¨çš„çº¿æ€§æ¢æŸ¥æ¥è§£å†³å“ˆå¸Œå†²çª">weak_table_té‡‡ç”¨çš„çº¿æ€§æ¢æŸ¥æ¥è§£å†³å“ˆå¸Œå†²çª</h3>
<h2 id="æŸ¥æ‰¾çš„è¿‡ç¨‹å’Œæ’å…¥ç±»ä¼¼">æŸ¥æ‰¾çš„è¿‡ç¨‹å’Œæ’å…¥ç±»ä¼¼</h2>
<pre><code class="language-c++">static weak_entry_t *
weak_entry_for_referent(weak_table_t *weak_table, objc_object *referent)
{
    assert(referent);

    weak_entry_t *weak_entries = weak_table-&gt;weak_entries;

    if (!weak_entries) return nil;

    size_t begin = hash_pointer(referent) &amp; weak_table-&gt;mask;
    size_t index = begin;
    size_t hash_displacement = 0;
    while (weak_table-&gt;weak_entries[index].referent != referent) {
        index = (index+1) &amp; weak_table-&gt;mask;
        if (index == begin) bad_weak_table(weak_table-&gt;weak_entries);
        hash_displacement++;
        if (hash_displacement &gt; weak_table-&gt;max_hash_displacement) {
            return nil;
        }
    }
    
    return &amp;weak_table-&gt;weak_entries[index];
}
</code></pre>
<h2 id="remove-entry-from-the-zones-table-of-weak-references">Remove entry from the zone's table of weak references.</h2>
<p>è¯¥å‡½æ•°çš„ç›®çš„æ˜¯ä»weak_tableä¸­åˆ é™¤æŸä¸€é¡¹entryï¼Œå³æŸä¸ªobjectå’Œå…¶weakå¼•ç”¨çš„æ˜ å°„å…³ç³»ã€‚å‡½æ•°çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œé¦–å…ˆå°†ç›¸åº”çš„å†…å­˜æ¸…é›¶ï¼Œè€Œåå°†weak_tableçš„è®¡æ•°å‡ä¸€ï¼Œç„¶åè°ƒç”¨weak_compact_maybeæ–¹æ³•æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦ç¼©å°weak_tableçš„ç©ºé—´ã€‚</p>
<pre><code class="language-c++">/**
 * Remove entry from the zone's table of weak references.
 */
static void weak_entry_remove(weak_table_t *weak_table, weak_entry_t *entry)
{
    // remove entry
    if (entry-&gt;out_of_line()) free(entry-&gt;referrers);
    bzero(entry, sizeof(*entry));

    weak_table-&gt;num_entries--;

    weak_compact_maybe(weak_table);
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://wukongun.github.io/post/hello-gridea/</id>
        <link href="https://wukongun.github.io/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>Windows</strong>ï¼Œ<strong>MacOS</strong> æˆ– <strong>Linux</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è®¡ç®—æœºä¸­çš„å †å’Œå’Œæ ˆï¼ˆç‰©ç†å†…å­˜ä¸Šçš„è§£é‡Šï¼‰]]></title>
        <id>https://wukongun.github.io/post/ji-suan-ji-zhong-de-dui-he-he-zhan-wu-li-nei-cun-shang-de-jie-shi/</id>
        <link href="https://wukongun.github.io/post/ji-suan-ji-zhong-de-dui-he-he-zhan-wu-li-nei-cun-shang-de-jie-shi/">
        </link>
        <updated>2017-07-21T07:45:43.000Z</updated>
        <content type="html"><![CDATA[<p>åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/bai___ddd/java/article/details/78631525</p>
<p>ç¼–ç¨‹è¯­è¨€ä¹¦ç±ä¸­ç»å¸¸è§£é‡Šå€¼ç±»å‹è¢«åˆ›å»ºåœ¨æ ˆä¸Šï¼Œå¼•ç”¨ç±»å‹è¢«åˆ›å»ºåœ¨å †ä¸Šï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æœ¬è´¨ä¸Šè§£é‡Šè¿™å †å’Œæ ˆæ˜¯ä»€ä¹ˆã€‚æˆ‘ä»…æœ‰é«˜çº§è¯­è¨€ç¼–ç¨‹ç»éªŒï¼Œæ²¡æœ‰çœ‹è¿‡å¯¹æ­¤æ›´æ¸…æ™°çš„è§£é‡Šã€‚æˆ‘çš„æ„æ€æ˜¯æˆ‘ç†è§£ä»€ä¹ˆæ˜¯æ ˆï¼Œä½†æ˜¯å®ƒä»¬åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œåœ¨å“ªå„¿å‘¢ï¼ˆç«™åœ¨å®é™…çš„è®¡ç®—æœºç‰©ç†å†…å­˜çš„è§’åº¦ä¸Šçœ‹ï¼‰ï¼Ÿ</p>
<p>1.Â åœ¨é€šå¸¸æƒ…å†µä¸‹ç”±æ“ä½œç³»ç»Ÿï¼ˆOSï¼‰å’Œè¯­è¨€çš„è¿è¡Œæ—¶ï¼ˆruntimeï¼‰æ§åˆ¶å—ï¼Ÿ</p>
<p>2.Â å®ƒä»¬çš„ä½œç”¨èŒƒå›´æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>3.Â å®ƒä»¬çš„å¤§å°ç”±ä»€ä¹ˆå†³å®šï¼Ÿ</p>
<p>4.Â å“ªä¸ªæ›´å¿«ï¼Ÿ</p>
<p>ç­”æ¡ˆä¸€</p>
<p>æ ˆæ˜¯ä¸ºæ‰§è¡Œçº¿ç¨‹ç•™å‡ºçš„å†…å­˜ç©ºé—´ã€‚å½“å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œæ ˆé¡¶ä¸ºå±€éƒ¨å˜é‡å’Œä¸€äº› bookkeeping æ•°æ®é¢„ç•™å—ã€‚å½“å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œå—å°±æ²¡æœ‰ç”¨äº†ï¼Œå¯èƒ½åœ¨ä¸‹æ¬¡çš„å‡½æ•°è°ƒç”¨çš„æ—¶å€™å†è¢«ä½¿ç”¨ã€‚æ ˆé€šå¸¸ç”¨åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„æ–¹å¼é¢„ç•™ç©ºé—´ï¼›å› æ­¤æœ€è¿‘çš„ä¿ç•™å—ï¼ˆreserved blockï¼‰é€šå¸¸æœ€å…ˆè¢«é‡Šæ”¾ã€‚è¿™ä¹ˆåšå¯ä»¥ä½¿è·Ÿè¸ªå †æ ˆå˜çš„ç®€å•ï¼›ä»æ ˆä¸­é‡Šæ”¾å—ï¼ˆfree blockï¼‰åªä¸è¿‡æ˜¯æŒ‡é’ˆçš„åç§»è€Œå·²ã€‚</p>
<p>å †ï¼ˆheapï¼‰æ˜¯ä¸ºåŠ¨æ€åˆ†é…é¢„ç•™çš„å†…å­˜ç©ºé—´ã€‚å’Œæ ˆä¸ä¸€æ ·ï¼Œä»å †ä¸Šåˆ†é…å’Œé‡æ–°åˆ†é…å—æ²¡æœ‰å›ºå®šæ¨¡å¼ï¼›ä½ å¯ä»¥åœ¨ä»»ä½•æ—¶å€™åˆ†é…å’Œé‡Šæ”¾å®ƒã€‚è¿™æ ·ä½¿å¾—è·Ÿè¸ªå“ªéƒ¨åˆ†å †å·²ç»è¢«åˆ†é…å’Œè¢«é‡Šæ”¾å˜çš„å¼‚å¸¸å¤æ‚ï¼›æœ‰è®¸å¤šå®šåˆ¶çš„å †åˆ†é…ç­–ç•¥ç”¨æ¥ä¸ºä¸åŒçš„ä½¿ç”¨æ¨¡å¼ä¸‹è°ƒæ•´å †çš„æ€§èƒ½ã€‚</p>
<p>æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªæ ˆï¼Œä½†æ˜¯æ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºé€šå¸¸éƒ½åªæœ‰ä¸€ä¸ªå †ï¼ˆå°½ç®¡ä¸ºä¸åŒç±»å‹åˆ†é…å†…å­˜ä½¿ç”¨å¤šä¸ªå †çš„æƒ…å†µä¹Ÿæ˜¯æœ‰çš„ï¼‰ã€‚</p>
<p>ç›´æ¥å›ç­”ä½ çš„é—®é¢˜ï¼š 1. å½“çº¿ç¨‹åˆ›å»ºçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿï¼ˆOSï¼‰ä¸ºæ¯ä¸€ä¸ªç³»ç»Ÿçº§ï¼ˆsystem-levelï¼‰çš„çº¿ç¨‹åˆ†é…æ ˆã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ“ä½œç³»ç»Ÿé€šè¿‡è°ƒç”¨è¯­è¨€çš„è¿è¡Œæ—¶ï¼ˆruntimeï¼‰å»ä¸ºåº”ç”¨ç¨‹åºåˆ†é…å †ã€‚ 2. æ ˆé™„å±äºçº¿ç¨‹ï¼Œå› æ­¤å½“çº¿ç¨‹ç»“æŸæ—¶æ ˆè¢«å›æ”¶ã€‚å †é€šå¸¸é€šè¿‡è¿è¡Œæ—¶åœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶è¢«åˆ†é…ï¼Œå½“åº”ç”¨ç¨‹åºï¼ˆè¿›ç¨‹ï¼‰é€€å‡ºæ—¶è¢«å›æ”¶ã€‚ 3. å½“çº¿ç¨‹è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œè®¾ç½®æ ˆçš„å¤§å°ã€‚åœ¨åº”ç”¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼Œè®¾ç½®å †çš„å¤§å°ï¼Œä½†æ˜¯å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™æ‰©å±•ï¼ˆåˆ†é…å™¨å‘æ“ä½œç³»ç»Ÿç”³è¯·æ›´å¤šçš„å†…å­˜ï¼‰ã€‚ 4. æ ˆæ¯”å †è¦å¿«ï¼Œå› ä¸ºå®ƒå­˜å–æ¨¡å¼ä½¿å®ƒå¯ä»¥è½»æ¾çš„åˆ†é…å’Œé‡æ–°åˆ†é…å†…å­˜ï¼ˆæŒ‡é’ˆ/æ•´å‹åªæ˜¯è¿›è¡Œç®€å•çš„é€’å¢æˆ–è€…é€’å‡è¿ç®—ï¼‰ï¼Œç„¶è€Œå †åœ¨åˆ†é…å’Œé‡Šæ”¾çš„æ—¶å€™æœ‰æ›´å¤šçš„å¤æ‚çš„ bookkeeping å‚ä¸ã€‚å¦å¤–ï¼Œåœ¨æ ˆä¸Šçš„æ¯ä¸ªå­—èŠ‚é¢‘ç¹çš„è¢«å¤ç”¨ä¹Ÿå°±æ„å‘³ç€å®ƒå¯èƒ½æ˜ å°„åˆ°å¤„ç†å™¨ç¼“å­˜ä¸­ï¼Œæ‰€ä»¥å¾ˆå¿«ï¼ˆè¯‘è€…æ³¨ï¼šå±€éƒ¨æ€§åŸç†ï¼‰ã€‚</p>
<p>ç­”æ¡ˆäºŒ</p>
<p>Stack:</p>
<p>1.Â å’Œå †ä¸€æ ·å­˜å‚¨åœ¨è®¡ç®—æœº RAM ä¸­ã€‚</p>
<p>2.Â åœ¨æ ˆä¸Šåˆ›å»ºå˜é‡çš„æ—¶å€™ä¼šæ‰©å±•ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨å›æ”¶ã€‚</p>
<p>3.Â ç›¸æ¯”å †è€Œè¨€åœ¨æ ˆä¸Šåˆ†é…è¦å¿«çš„å¤šã€‚</p>
<p>4.Â ç”¨æ•°æ®ç»“æ„ä¸­çš„æ ˆå®ç°ã€‚</p>
<p>5.Â å­˜å‚¨å±€éƒ¨æ•°æ®ï¼Œè¿”å›åœ°å€ï¼Œç”¨åšå‚æ•°ä¼ é€’ã€‚</p>
<p>6.Â å½“ç”¨æ ˆè¿‡å¤šæ—¶å¯å¯¼è‡´æ ˆæº¢å‡ºï¼ˆæ— ç©·æ¬¡ï¼ˆå¤§é‡çš„ï¼‰çš„é€’å½’è°ƒç”¨ï¼Œæˆ–è€…å¤§é‡çš„å†…å­˜åˆ†é…ï¼‰ã€‚</p>
<p>7.Â åœ¨æ ˆä¸Šçš„æ•°æ®å¯ä»¥ç›´æ¥è®¿é—®ï¼ˆä¸æ˜¯éè¦ä½¿ç”¨æŒ‡é’ˆè®¿é—®ï¼‰ã€‚</p>
<p>8.Â å¦‚æœä½ åœ¨ç¼–è¯‘ä¹‹å‰ç²¾ç¡®çš„çŸ¥é“ä½ éœ€è¦åˆ†é…æ•°æ®çš„å¤§å°å¹¶ä¸”ä¸æ˜¯å¤ªå¤§çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨æ ˆã€‚</p>
<p>9.Â å½“ä½ ç¨‹åºå¯åŠ¨æ—¶å†³å®šæ ˆçš„å®¹é‡ä¸Šé™ã€‚</p>
<p>Heapï¼š</p>
<p>1.Â å’Œæ ˆä¸€æ ·å­˜å‚¨åœ¨è®¡ç®—æœºRAMã€‚</p>
<p>2.Â åœ¨å †ä¸Šçš„å˜é‡å¿…é¡»è¦æ‰‹åŠ¨é‡Šæ”¾ï¼Œä¸å­˜åœ¨ä½œç”¨åŸŸçš„é—®é¢˜ã€‚æ•°æ®å¯ç”¨ delete, delete[] æˆ–è€… free æ¥é‡Šæ”¾ã€‚</p>
<p>3.Â ç›¸æ¯”åœ¨æ ˆä¸Šåˆ†é…å†…å­˜è¦æ…¢ã€‚</p>
<p>4.Â é€šè¿‡ç¨‹åºæŒ‰éœ€åˆ†é…ã€‚</p>
<p>5.Â å¤§é‡çš„åˆ†é…å’Œé‡Šæ”¾å¯é€ æˆå†…å­˜ç¢ç‰‡ã€‚</p>
<p>6.Â åœ¨ C++ ä¸­ï¼Œåœ¨å †ä¸Šåˆ›å»ºæ•°çš„æ®ä½¿ç”¨æŒ‡é’ˆè®¿é—®ï¼Œç”¨ new æˆ–è€… malloc åˆ†é…å†…å­˜ã€‚</p>
<p>7.Â å¦‚æœç”³è¯·çš„ç¼“å†²åŒºè¿‡å¤§çš„è¯ï¼Œå¯èƒ½ç”³è¯·å¤±è´¥ã€‚</p>
<p>8.Â åœ¨è¿è¡ŒæœŸé—´ä½ ä¸çŸ¥é“ä¼šéœ€è¦å¤šå¤§çš„æ•°æ®æˆ–è€…ä½ éœ€è¦åˆ†é…å¤§é‡çš„å†…å­˜çš„æ—¶å€™ï¼Œå»ºè®®ä½ ä½¿ç”¨å †ã€‚</p>
<p>9.Â å¯èƒ½é€ æˆå†…å­˜æ³„éœ²ã€‚</p>
<p>ä¸¾ä¾‹ï¼š</p>
<p>int foo()<br>
{<br>
char *pBuffer; //&lt;â€“nothing allocated yet (excluding the pointer itself, which is allocated here on the stack).<br>
bool b = true; // Allocated on the stack.<br>
if(b)<br>
{<br>
//Create 500 bytes on the stack<br>
char buffer[500];</p>
<p>//Create 500 bytes on the heap<br>
pBuffer = new char[500];</p>
<p>}//&lt;â€“ buffer is deallocated here, pBuffer is not<br>
}//&lt;â€” oops thereâ€™s a memory leak, I should have called delete[] pBuffer;</p>
<p>ç­”æ¡ˆä¸‰</p>
<p>å †å’Œæ ˆæ˜¯ä¸¤ç§å†…å­˜åˆ†é…çš„ä¸¤ä¸ªç»Ÿç§°ã€‚å¯èƒ½æœ‰å¾ˆå¤šç§ä¸åŒçš„å®ç°æ–¹å¼ï¼Œä½†æ˜¯å®ç°è¦ç¬¦åˆå‡ ä¸ªåŸºæœ¬çš„æ¦‚å¿µ:</p>
<p>1.å¯¹æ ˆè€Œè¨€ï¼Œæ ˆä¸­çš„æ–°åŠ æ•°æ®é¡¹æ”¾åœ¨å…¶ä»–æ•°æ®çš„é¡¶éƒ¨ï¼Œç§»é™¤æ—¶ä½ ä¹Ÿåªèƒ½ç§»é™¤æœ€é¡¶éƒ¨çš„æ•°æ®ï¼ˆä¸èƒ½è¶Šä½è·å–ï¼‰ã€‚</p>
<p></p>
<p>2.å¯¹å †è€Œè¨€ï¼Œæ•°æ®é¡¹ä½ç½®æ²¡æœ‰å›ºå®šçš„é¡ºåºã€‚ä½ å¯ä»¥ä»¥ä»»ä½•é¡ºåºæ’å…¥å’Œåˆ é™¤ï¼Œå› ä¸ºä»–ä»¬æ²¡æœ‰â€œé¡¶éƒ¨â€æ•°æ®è¿™ä¸€æ¦‚å¿µã€‚</p>
<p></p>
<p>ä¸Šé¢ä¸Šä¸ªå›¾ç‰‡å¾ˆå¥½çš„æè¿°äº†å †å’Œæ ˆåˆ†é…å†…å­˜çš„æ–¹å¼ã€‚</p>
<p>åœ¨é€šå¸¸æƒ…å†µä¸‹ç”±æ“ä½œç³»ç»Ÿï¼ˆOSï¼‰å’Œè¯­è¨€çš„è¿è¡Œæ—¶ï¼ˆruntimeï¼‰æ§åˆ¶å—ï¼Ÿ</p>
<p>å¦‚å‰æ‰€è¿°ï¼Œå †å’Œæ ˆæ˜¯ä¸€ä¸ªç»Ÿç§°ï¼Œå¯ä»¥æœ‰å¾ˆå¤šçš„å®ç°æ–¹å¼ã€‚è®¡ç®—æœºç¨‹åºé€šå¸¸æœ‰ä¸€ä¸ªæ ˆå«åšè°ƒç”¨æ ˆï¼Œç”¨æ¥å­˜å‚¨å½“å‰å‡½æ•°è°ƒç”¨ç›¸å…³çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚ï¼šä¸»è°ƒå‡½æ•°çš„åœ°å€ï¼Œå±€éƒ¨å˜é‡ï¼‰ï¼Œå› ä¸ºå‡½æ•°è°ƒç”¨ä¹‹åéœ€è¦è¿”å›ç»™ä¸»è°ƒå‡½æ•°ã€‚æ ˆé€šè¿‡æ‰©å±•å’Œæ”¶ç¼©æ¥æ‰¿è½½ä¿¡æ¯ã€‚å®é™…ä¸Šï¼Œç¨‹åºä¸æ˜¯ç”±è¿è¡Œæ—¶æ¥æ§åˆ¶çš„ï¼Œå®ƒç”±ç¼–ç¨‹è¯­è¨€ã€æ“ä½œç³»ç»Ÿç”šè‡³æ˜¯ç³»ç»Ÿæ¶æ„æ¥å†³å®šã€‚</p>
<p>å †æ˜¯åœ¨ä»»ä½•å†…å­˜ä¸­åŠ¨æ€å’Œéšæœºåˆ†é…çš„ï¼ˆå†…å­˜çš„ï¼‰ç»Ÿç§°ï¼›ä¹Ÿå°±æ˜¯æ— åºçš„ã€‚å†…å­˜é€šå¸¸ç”±æ“ä½œç³»ç»Ÿåˆ†é…ï¼Œé€šè¿‡åº”ç”¨ç¨‹åºè°ƒç”¨ API æ¥å£å»å®ç°åˆ†é…ã€‚åœ¨ç®¡ç†åŠ¨æ€åˆ†é…å†…å­˜ä¸Šä¼šæœ‰ä¸€äº›é¢å¤–çš„å¼€é”€ï¼Œä¸è¿‡è¿™ç”±æ“ä½œç³»ç»Ÿæ¥å¤„ç†ã€‚</p>
<p>å®ƒä»¬çš„ä½œç”¨èŒƒå›´æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>è°ƒç”¨æ ˆæ˜¯ä¸€ä¸ªä½å±‚æ¬¡çš„æ¦‚å¿µï¼Œå°±ç¨‹åºè€Œè¨€ï¼Œå®ƒå’Œâ€œä½œç”¨èŒƒå›´â€æ²¡ä»€ä¹ˆå…³ç³»ã€‚å¦‚æœä½ åæ±‡ç¼–ä¸€äº›ä»£ç ï¼Œä½ å°±ä¼šçœ‹åˆ°æŒ‡é’ˆå¼•ç”¨å †æ ˆéƒ¨åˆ†ã€‚å°±é«˜çº§è¯­è¨€è€Œè¨€ï¼Œè¯­è¨€æœ‰å®ƒè‡ªå·±çš„èŒƒå›´è§„åˆ™ã€‚ä¸€æ—¦å‡½æ•°è¿”å›ï¼Œå‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡ä¼šç›´æ¥ç›´æ¥é‡Šæ”¾ã€‚ä½ çš„ç¼–ç¨‹è¯­è¨€å°±æ˜¯ä¾æ®è¿™ä¸ªå·¥ä½œçš„ã€‚</p>
<p>åœ¨å †ä¸­ï¼Œä¹Ÿå¾ˆéš¾å»å®šä¹‰ã€‚ä½œç”¨èŒƒå›´æ˜¯ç”±æ“ä½œç³»ç»Ÿé™å®šçš„ï¼Œä½†æ˜¯ä½ çš„ç¼–ç¨‹è¯­è¨€å¯èƒ½å¢åŠ å®ƒè‡ªå·±çš„ä¸€äº›è§„åˆ™ï¼Œå»é™å®šå †åœ¨åº”ç”¨ç¨‹åºä¸­çš„èŒƒå›´ã€‚ä½“ç³»æ¶æ„å’Œæ“ä½œç³»ç»Ÿæ˜¯ä½¿ç”¨è™šæ‹Ÿåœ°å€çš„ï¼Œç„¶åç”±å¤„ç†å™¨ç¿»è¯‘åˆ°å®é™…çš„ç‰©ç†åœ°å€ä¸­ï¼Œè¿˜æœ‰é¡µé¢é”™è¯¯ç­‰ç­‰ã€‚å®ƒä»¬è®°å½•é‚£ä¸ªé¡µé¢å±äºé‚£ä¸ªåº”ç”¨ç¨‹åºã€‚ä¸è¿‡ä½ ä¸ç”¨å…³å¿ƒè¿™äº›ï¼Œå› ä¸ºä½ ä»…ä»…åœ¨ä½ çš„ç¼–ç¨‹è¯­è¨€ä¸­åˆ†é…å’Œé‡Šæ”¾å†…å­˜ï¼Œå’Œä¸€äº›é”™è¯¯æ£€æŸ¥ï¼ˆå‡ºç°åˆ†é…å¤±è´¥å’Œé‡Šæ”¾å¤±è´¥çš„åŸå› ï¼‰ã€‚</p>
<p>å®ƒä»¬çš„å¤§å°ç”±ä»€ä¹ˆå†³å®šï¼Ÿ</p>
<p>ä¾æ—§ï¼Œä¾èµ–äºè¯­è¨€ï¼Œç¼–è¯‘å™¨ï¼Œæ“ä½œç³»ç»Ÿå’Œæ¶æ„ã€‚æ ˆé€šå¸¸æå‰åˆ†é…å¥½äº†ï¼Œå› ä¸ºæ ˆå¿…é¡»æ˜¯è¿ç»­çš„å†…å­˜å—ã€‚è¯­è¨€çš„ç¼–è¯‘å™¨æˆ–è€…æ“ä½œç³»ç»Ÿå†³å®šå®ƒçš„å¤§å°ã€‚ä¸è¦åœ¨æ ˆä¸Šå­˜å‚¨å¤§å—æ•°æ®ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æœ‰è¶³å¤Ÿçš„ç©ºé—´ä¸ä¼šæº¢å‡ºï¼Œé™¤éå‡ºç°äº†æ— é™é€’å½’çš„æƒ…å†µï¼ˆé¢ï¼Œæ ˆæº¢å‡ºäº†ï¼‰æˆ–è€…å…¶å®ƒä¸å¸¸è§äº†ç¼–ç¨‹å†³è®®ã€‚</p>
<p>å †æ˜¯ä»»ä½•å¯ä»¥åŠ¨æ€åˆ†é…çš„å†…å­˜çš„ç»Ÿç§°ã€‚è¿™è¦çœ‹ä½ æ€ä¹ˆçœ‹å¾…å®ƒäº†ï¼Œå®ƒçš„å¤§å°æ˜¯å˜åŠ¨çš„ã€‚åœ¨ç°ä»£å¤„ç†å™¨ä¸­å’Œæ“ä½œç³»ç»Ÿçš„å·¥ä½œæ–¹å¼æ˜¯é«˜åº¦æŠ½è±¡çš„ï¼Œå› æ­¤ä½ åœ¨æ­£å¸¸æƒ…å†µä¸‹ä¸éœ€è¦æ‹…å¿ƒå®ƒå®é™…çš„å¤§å°ï¼Œé™¤éä½ å¿…é¡»è¦ä½¿ç”¨ä½ è¿˜æ²¡æœ‰åˆ†é…çš„å†…å­˜æˆ–è€…å·²ç»é‡Šæ”¾äº†çš„å†…å­˜ã€‚</p>
<p>å“ªä¸ªæ›´å¿«ä¸€äº›ï¼Ÿ</p>
<p>æ ˆæ›´å¿«å› ä¸ºæ‰€æœ‰çš„ç©ºé—²å†…å­˜éƒ½æ˜¯è¿ç»­çš„ï¼Œå› æ­¤ä¸éœ€è¦å¯¹ç©ºé—²å†…å­˜å—é€šè¿‡åˆ—è¡¨æ¥ç»´æŠ¤ã€‚åªæ˜¯ä¸€ä¸ªç®€å•çš„æŒ‡å‘å½“å‰æ ˆé¡¶çš„æŒ‡é’ˆã€‚ç¼–è¯‘å™¨é€šå¸¸ç”¨ä¸€ä¸ªä¸“é—¨çš„ã€å¿«é€Ÿçš„å¯„å­˜å™¨æ¥å®ç°ã€‚æ›´é‡è¦çš„ä¸€ç‚¹äº‹æ˜¯ï¼Œéšåçš„æ ˆä¸Šæ“ä½œé€šå¸¸é›†ä¸­åœ¨ä¸€ä¸ªå†…å­˜å—çš„é™„è¿‘ï¼Œè¿™æ ·çš„è¯æœ‰åˆ©äºå¤„ç†å™¨çš„é«˜é€Ÿè®¿é—®ï¼ˆè¯‘è€…æ³¨ï¼šå±€éƒ¨æ€§åŸç†ï¼‰ã€‚</p>
<p>ç­”æ¡ˆå››</p>
<p>ä½ é—®é¢˜çš„ç­”æ¡ˆæ˜¯ä¾èµ–äºå®ç°çš„ï¼Œæ ¹æ®ä¸åŒçš„ç¼–è¯‘å™¨å’Œå¤„ç†å™¨æ¶æ„è€Œä¸åŒã€‚ä¸‹é¢ç®€å•çš„è§£é‡Šä¸€ä¸‹ï¼š</p>
<p>1.Â æ ˆå’Œå †éƒ½æ˜¯ç”¨æ¥ä»åº•å±‚æ“ä½œç³»ç»Ÿä¸­è·å–å†…å­˜çš„ã€‚</p>
<p>2.Â åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½å¯ä»¥æœ‰ä»–è‡ªå·±å®Œå…¨çš„ç‹¬ç«‹çš„æ ˆï¼Œä½†æ˜¯ä»–ä»¬å…±äº«å †ã€‚å¹¶è¡Œå­˜å–è¢«å †æ§åˆ¶è€Œä¸æ˜¯æ ˆã€‚</p>
<p>å †:</p>
<p>1.Â å †åŒ…å«ä¸€ä¸ªé“¾è¡¨æ¥ç»´æŠ¤å·²ç”¨å’Œç©ºé—²çš„å†…å­˜å—ã€‚åœ¨å †ä¸Šæ–°åˆ†é…ï¼ˆç”¨ new æˆ–è€… mallocï¼‰å†…å­˜æ˜¯ä»ç©ºé—²çš„å†…å­˜å—ä¸­æ‰¾åˆ°ä¸€äº›æ»¡è¶³è¦æ±‚çš„åˆé€‚å—ã€‚è¿™ä¸ªæ“ä½œä¼šæ›´æ–°å †ä¸­çš„å—é“¾è¡¨ã€‚è¿™äº›å…ƒä¿¡æ¯ä¹Ÿå­˜å‚¨åœ¨å †ä¸Šï¼Œç»å¸¸åœ¨æ¯ä¸ªå—çš„å¤´éƒ¨ä¸€ä¸ªå¾ˆå°åŒºåŸŸã€‚</p>
<p>2.Â å †çš„å¢åŠ æ–°å¿«é€šå¸¸ä»åœ°åœ°å€å‘é«˜åœ°å€æ‰©å±•ã€‚å› æ­¤ä½ å¯ä»¥è®¤ä¸ºå †éšç€å†…å­˜åˆ†é…è€Œä¸æ–­çš„å¢åŠ å¤§å°ã€‚å¦‚æœç”³è¯·çš„å†…å­˜å¤§å°å¾ˆå°çš„è¯ï¼Œé€šå¸¸ä»åº•å±‚æ“ä½œç³»ç»Ÿä¸­å¾—åˆ°æ¯”ç”³è¯·å¤§å°è¦å¤šçš„å†…å­˜ã€‚</p>
<p>3.Â ç”³è¯·å’Œé‡Šæ”¾è®¸å¤šå°çš„å—å¯èƒ½ä¼šäº§ç”Ÿå¦‚ä¸‹çŠ¶æ€ï¼šåœ¨å·²ç”¨å—ä¹‹é—´å­˜åœ¨å¾ˆå¤šå°çš„ç©ºé—²å—ã€‚è¿›è€Œç”³è¯·å¤§å—å†…å­˜å¤±è´¥ï¼Œè™½ç„¶ç©ºé—²å—çš„æ€»å’Œè¶³å¤Ÿï¼Œä½†æ˜¯ç©ºé—²çš„å°å—æ˜¯é›¶æ•£çš„ï¼Œä¸èƒ½æ»¡è¶³ç”³è¯·çš„å¤§å°ï¼Œã€‚è¿™å«åšâ€œå †ç¢ç‰‡â€ã€‚</p>
<p>4.Â å½“æ—è¾¹æœ‰ç©ºé—²å—çš„å·²ç”¨å—è¢«é‡Šæ”¾æ—¶ï¼Œæ–°çš„ç©ºé—²å—å¯èƒ½ä¼šä¸ç›¸é‚»çš„ç©ºé—²å—åˆå¹¶ä¸ºä¸€ä¸ªå¤§çš„ç©ºé—²å—ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆçš„å‡å°‘â€œå †ç¢ç‰‡â€çš„äº§ç”Ÿã€‚</p>
<p></p>
<p>æ ˆ:</p>
<p>1.Â æ ˆç»å¸¸ä¸ sp å¯„å­˜å™¨ï¼ˆè¯‘è€…æ³¨ï¼šâ€stack pointerâ€ï¼Œäº†è§£æ±‡ç¼–çš„æœ‹å‹åº”è¯¥éƒ½çŸ¥é“ï¼‰ä¸€èµ·å·¥ä½œï¼Œæœ€åˆ sp æŒ‡å‘æ ˆé¡¶ï¼ˆæ ˆçš„é«˜åœ°å€ï¼‰ã€‚</p>
<p>2.Â CPU ç”¨ push æŒ‡ä»¤æ¥å°†æ•°æ®å‹æ ˆï¼Œç”¨ pop æŒ‡ä»¤æ¥å¼¹æ ˆã€‚å½“ç”¨ push å‹æ ˆæ—¶ï¼Œsp å€¼å‡å°‘ï¼ˆå‘ä½åœ°å€æ‰©å±•ï¼‰ã€‚å½“ç”¨ pop å¼¹æ ˆæ—¶ï¼Œsp å€¼å¢å¤§ã€‚å­˜å‚¨å’Œè·å–æ•°æ®éƒ½æ˜¯ CPU å¯„å­˜å™¨çš„å€¼ã€‚</p>
<p>3.Â å½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼ŒCPUä½¿ç”¨ç‰¹å®šçš„æŒ‡ä»¤æŠŠå½“å‰çš„ IP ï¼ˆè¯‘è€…æ³¨ï¼šâ€œinstruction pointerâ€ï¼Œæ˜¯ä¸€ä¸ªå¯„å­˜å™¨ï¼Œç”¨æ¥è®°å½• CPU æŒ‡ä»¤çš„ä½ç½®ï¼‰å‹æ ˆã€‚å³æ‰§è¡Œä»£ç çš„åœ°å€ã€‚CPU æ¥ä¸‹æ¥å°†è°ƒç”¨å‡½æ•°åœ°å€èµ‹ç»™ IP ï¼Œè¿›è¡Œè°ƒç”¨ã€‚å½“å‡½æ•°è¿”å›æ—¶ï¼Œæ—§çš„ IP è¢«å¼¹æ ˆï¼ŒCPU ç»§ç»­å»å‡½æ•°è°ƒç”¨ä¹‹å‰çš„ä»£ç ã€‚</p>
<p>4.Â å½“è¿›å…¥å‡½æ•°æ—¶ï¼Œsp å‘ä¸‹æ‰©å±•ï¼Œæ‰©å±•åˆ°ç¡®ä¿ä¸ºå‡½æ•°çš„å±€éƒ¨å˜é‡ç•™è¶³å¤Ÿå¤§å°çš„ç©ºé—´ã€‚å¦‚æœå‡½æ•°ä¸­æœ‰ä¸€ä¸ª 32-bit çš„å±€éƒ¨å˜é‡ä¼šåœ¨æ ˆä¸­ç•™å¤Ÿå››å­—èŠ‚çš„ç©ºé—´ã€‚å½“å‡½æ•°è¿”å›æ—¶ï¼Œsp é€šè¿‡è¿”å›åŸæ¥çš„ä½ç½®æ¥é‡Šæ”¾ç©ºé—´ã€‚</p>
<p>5.Â å¦‚æœå‡½æ•°æœ‰å‚æ•°çš„è¯ï¼Œåœ¨å‡½æ•°è°ƒç”¨ä¹‹å‰ï¼Œä¼šå°†å‚æ•°å‹æ ˆã€‚å‡½æ•°ä¸­çš„ä»£ç é€šè¿‡ sp çš„å½“å‰ä½ç½®æ¥å®šä½å‚æ•°å¹¶è®¿é—®å®ƒä»¬ã€‚</p>
<p>6.Â å‡½æ•°åµŒå¥—è°ƒç”¨å’Œä½¿ç”¨é­”æ³•ä¸€æ ·ï¼Œæ¯ä¸€æ¬¡æ–°è°ƒç”¨çš„å‡½æ•°éƒ½ä¼šåˆ†é…å‡½æ•°å‚æ•°ï¼Œè¿”å›å€¼åœ°å€ã€å±€éƒ¨å˜é‡ç©ºé—´ã€åµŒå¥—è°ƒç”¨çš„æ´»åŠ¨è®°å½•éƒ½è¦è¢«å‹å…¥æ ˆä¸­ã€‚å‡½æ•°è¿”å›æ—¶ï¼ŒæŒ‰ç…§æ­£ç¡®æ–¹å¼çš„æ’¤é”€ã€‚</p>
<p>7.Â æ ˆè¦å—åˆ°å†…å­˜å—çš„é™åˆ¶ï¼Œä¸æ–­çš„å‡½æ•°åµŒå¥—/ä¸ºå±€éƒ¨å˜é‡åˆ†é…å¤ªå¤šçš„ç©ºé—´ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ ˆæº¢å‡ºã€‚å½“æ ˆä¸­çš„å†…å­˜åŒºåŸŸéƒ½å·²ç»è¢«ä½¿ç”¨å®Œä¹‹åç»§ç»­å‘ä¸‹å†™ï¼ˆä½åœ°å€ï¼‰ï¼Œä¼šè§¦å‘ä¸€ä¸ª CPU å¼‚å¸¸ã€‚è¿™ä¸ªå¼‚å¸¸æ¥ä¸‹ä¼šé€šè¿‡è¯­è¨€çš„è¿è¡Œæ—¶è½¬æˆå„ç§ç±»å‹çš„æ ˆæº¢å‡ºå¼‚å¸¸ã€‚ï¼ˆè¯‘è€…æ³¨ï¼šâ€œä¸åŒè¯­è¨€çš„å¼‚å¸¸æç¤ºä¸åŒï¼Œå› æ­¤é€šè¿‡è¯­è¨€è¿è¡Œæ—¶æ¥è½¬æ¢â€æˆ‘æƒ³ä»–è¡¨è¾¾çš„æ˜¯è¿™ä¸ªå«ä¹‰ï¼‰</p>
<p></p>
<p>*å‡½æ•°çš„åˆ†é…å¯ä»¥ç”¨å †æ¥ä»£æ›¿æ ˆå—ï¼Ÿ</p>
<p>ä¸å¯ä»¥çš„ï¼Œå‡½æ•°çš„æ´»åŠ¨è®°å½•ï¼ˆå³å±€éƒ¨æˆ–è€…è‡ªåŠ¨å˜é‡ï¼‰è¢«åˆ†é…åœ¨æ ˆä¸Šï¼Œ è¿™æ ·åšä¸ä½†å­˜å‚¨äº†è¿™äº›å˜é‡ï¼Œè€Œä¸”å¯ä»¥ç”¨æ¥åµŒå¥—å‡½æ•°çš„è¿½è¸ªã€‚</p>
<p>å †çš„ç®¡ç†ä¾èµ–äºè¿è¡Œæ—¶ç¯å¢ƒï¼ŒC ä½¿ç”¨ malloc ï¼ŒC++ ä½¿ç”¨ new ï¼Œä½†æ˜¯å¾ˆå¤šè¯­è¨€æœ‰åƒåœ¾å›æ”¶æœºåˆ¶ã€‚</p>
<p>æ ˆæ˜¯æ›´ä½å±‚æ¬¡çš„ç‰¹æ€§ä¸å¤„ç†å™¨æ¶æ„ç´§å¯†çš„ç»“åˆåˆ°ä¸€èµ·ã€‚å½“å †ä¸å¤Ÿæ—¶å¯ä»¥æ‰©å±•ç©ºé—´ï¼Œè¿™ä¸éš¾åšåˆ°ï¼Œå› ä¸ºå¯ä»¥æœ‰åº“å‡½æ•°å¯ä»¥è°ƒç”¨ã€‚ä½†æ˜¯ï¼Œæ‰©å±•æ ˆé€šå¸¸æ¥è¯´æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºåœ¨æ ˆæº¢å‡ºçš„æ—¶å€™ï¼Œæ‰§è¡Œçº¿ç¨‹å°±è¢«æ“ä½œç³»ç»Ÿå…³é—­äº†ï¼Œè¿™å·²ç»å¤ªæ™šäº†ã€‚</p>
<p>è¯‘è€…æ³¨</p>
<p>å…³äºå †æ ˆçš„è¿™ä¸ªå¸–å­ï¼Œå¯¹æˆ‘æ¥è¯´ï¼Œæ”¶è·éå¸¸å¤šã€‚æˆ‘ä¹‹å‰çœ‹è¿‡ä¸€äº›èµ„æ–™ï¼Œè‡ªå·±å†™ä»£ç çš„æ—¶å€™ä¹Ÿå¸¸å¸¸æ€è€ƒã€‚å°±è¿™æ–¹é¢ï¼Œä¹Ÿå’Œç¥¥å­ï¼ˆæˆ‘çš„å¤§å­¦èˆå‹ï¼Œç°åœ¨åŒ—äº¬é‚®ç”µè¯»ç ”ï¼ŒæŠ€æœ¯ç‰›äººï¼‰æ¢è®¨è¿‡å¤šæ¬¡äº†ã€‚ä½†æ˜¯ç»ˆç©¶æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„çŸ¥è¯†ç‚¹ï¼Œè¿™ä¸ªå¸–å­çœ‹å®Œä¹‹åï¼Œè±ç„¶å¼€æœ—ï¼ŒæŠŠçŸ¥è¯†ç‚¹ç»ˆäºè¿æ¥æˆäº†ä¸€ä¸ªç½‘ã€‚è¿™ç§æ„Ÿè§‰ï¼Œç»å†è¿‡çš„ä¸€å®šæ‡‚å¾—ï¼ŒæœŸé—´çš„å…´å¥‹ä¸è¨€è€Œå–»ã€‚</p>
<p>è¿™ä¸ªå¸–å­è·Ÿå¸–è€…ä¸å°‘ï¼Œæˆ‘é€‰äº†è¯„åˆ†æœ€é«˜çš„å››ä¸ªã€‚è¿™å››ä¸ªä¹‹é—´ä¹Ÿæœ‰ä¸€äº›æ˜¯é‡å¤çš„è§‚ç‚¹ã€‚ä¸ªäººé’Ÿçˆ±ç¬¬å››ä¸ªå›ç­”è€…ï¼Œæˆ‘çœ‹çš„æ—¶å€™ï¼Œç¬é—´é«˜æ½®äº†ï¼Œæœ‰æœ¨æœ‰ï¼Ÿä¸è¿‡éœ€è¦ä¸€äº›æ±‡ç¼–è¯­è¨€ã€æ“ä½œç³»ç»Ÿã€è®¡ç®—æœºç»„æˆåŸç†çš„çš„åŸºç¡€ï¼ŒçŸ¥é“é‚£å‡ ä¸ªå¯„å­˜å™¨æ˜¯å¹²ä»€ä¹ˆçš„ï¼Œè¦çŸ¥é“è®¡ç®—æœºçš„æµæ°´çº¿æŒ‡ä»¤å·¥ä½œæœºåˆ¶ï¼Œä¿æŠ¤/æ¢å¤ç°åœºç­‰æ¦‚å¿µã€‚ä¸‰ä¸ªå›å¤è€…éƒ½æ¶‰åŠåˆ°äº†æ“ä½œç³»ç»Ÿä¸­è™šæ‹Ÿå†…å­˜ï¼›åœ¨æ¯”è¾ƒé€Ÿåº¦çš„æ—¶å€™ï¼Œå¤§å®¶ä¸€å®šè¦åœ¨è„‘ä¸­å¯¹â€œå±€éƒ¨æ€§åŸç†â€å’Œè®¡ç®—æœºé«˜é€Ÿç¼“å­˜æœ‰ä¸€ä¸ªæ¦‚å¿µã€‚</p>
<p>å¦‚æœä½ æŠŠè¿™ç¯‡æ–‡ç« çœ‹æ‡‚äº†ï¼Œæˆ‘ç›¸ä¿¡ä½ æ”¶è·çš„ä¸åªæ˜¯å †å’Œæ ˆï¼Œä½ ä¼šç†è§£çš„æ›´å¤šï¼</p>
<p>å…´å¥‹ä¹‹ä½™ï¼Œæœ‰å‡ ç‚¹è¿˜æ˜¯è¦å¼ºè°ƒçš„ï¼Œç¿»è¯‘æ²¡æœ‰é€å­—é€è¯ç¿»è¯‘ï¼Œå¤§éƒ¨åˆ†æ˜¯é€šè¿‡æˆ‘ä¸ªäººçš„çŸ¥è¯†ç§¯ç´¯å’Œå¯¹å›å¸–è€…çš„æ„å›¾æ£æµ‹è€Œæ¥çš„ã€‚è¯·å¤§å®¶ä¸è¦å’¬æ–‡åš¼å­—ï¼Œé€ä¸ªæ¨æ•²ï¼Œæˆ‘ä»¬çš„ç›®çš„åœ¨äºæŠ€æœ¯äº¤æµï¼Œä¸æ˜¯ä¹ˆï¼Ÿè¾¾åˆ°è¿™ä¸€ç›®çš„å°±å¤Ÿäº†ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€äº›ä¸ç¡®å®šç‚¹:</p>
<p>1.Â æˆ‘æ²¡æœ‰å¬è¿‡ bookkeeping data è¿™ç§è¯´æ³•ï¼Œæ•…æ²¡æœ‰ç¿»è¯‘ã€‚ä»ä¸Šä¸‹æ–‡ç†è§£æ¥çœ‹ï¼Œå¯ä»¥æƒ³æˆæ˜¯ç”¨æ¥å¯„å­˜å™¨å€¼ï¼Ÿå‡½æ•°å‚æ•°ï¼Ÿè¿”å›åœ°å€ï¼Ÿå¦‚æœæœ‰äº†è§£å…·ä½“å«ä¹‰çš„æœ‹å‹ï¼Œçƒ¦è¯·å‘ŠçŸ¥ã€‚</p>
<p>2.Â æ ˆå’Œå †æ ˆæ˜¯ä¸€å›äº‹ï¼Œè‹±æ–‡è¡¨è¾¾æ˜¯ stackï¼Œå †æ˜¯ heapã€‚</p>
<p>3.Â è°ƒç”¨æ ˆçš„æ¦‚å¿µï¼Œæˆ‘æ˜¯ç¬¬ä¸€æ¬¡å¬è¯´ï¼Œä¸å¤ªç†Ÿæ‚‰ã€‚å¤§å®¶å¯ä»¥å»æŸ¥æŸ¥èµ„æ–™ç ”ç©¶ä¸€ä¸‹ã€‚</p>
<p>ä»¥ä¸Šï¼Œé€ç»™å¤§å®¶ï¼Œæœ¬æ–‡ç»“æŸã€‚<br>
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è‹¹æœè®¾å¤‡å’Œ macç”µè„‘é—ªè¿]]></title>
        <id>https://wukongun.github.io/post/ping-guo-she-bei-he-mac-dian-nao-shan-lian/</id>
        <link href="https://wukongun.github.io/post/ping-guo-she-bei-he-mac-dian-nao-shan-lian/">
        </link>
        <updated>2017-03-15T07:45:35.000Z</updated>
        <content type="html"><![CDATA[<h3 id="iphoneè¿æ¥macå……ç”µæˆ–è€…è°ƒè¯•çš„æ—¶å€™-æ€»æ˜¯é—ªæ–­-æ€»ç»“ä¸‹è¿™ä¸ªé—®é¢˜">iPhoneè¿æ¥macå……ç”µæˆ–è€…è°ƒè¯•çš„æ—¶å€™ æ€»æ˜¯é—ªæ–­ æ€»ç»“ä¸‹è¿™ä¸ªé—®é¢˜</h3>
<ol>
<li>é¦–å…ˆæ‹”æ’æ•°æ®çº¿ çœ‹æƒ…å†µæœ‰æ— å¥½è½¬ æ¥å£å†…æ˜¯å¦å¹²å‡€ æœ‰æ— æ‚ç‰©</li>
<li>å¦å¤–å°±æ˜¯ ç”µè„‘çš„usbç”µå‹ä¸è¶³ æ‹”æ‰usbè®¾å¤‡ å…³æ‰usbè¿›ç¨‹ é‡æ–°è¿æ¥usbè®¾å¤‡ ä¸€èˆ¬ä¼šè§£å†³é—ªè¿çš„é—®é¢˜<br>
<code>sudo killall -STOP -c usbd</code></li>
<li>å¦‚æœè¿˜ä¸è¡Œå¯ä»¥å°è¯•æ¢æ•°æ®çº¿ é‡å¤ä¸Šé¢çš„æ–¹æ³•</li>
</ol>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[C++ lambdaè¡¨è¾¾å¼]]></title>
        <id>https://wukongun.github.io/post/c-lambda-biao-da-shi/</id>
        <link href="https://wukongun.github.io/post/c-lambda-biao-da-shi/">
        </link>
        <updated>2015-07-14T13:09:03.000Z</updated>
        <content type="html"><![CDATA[<p><strong>C++ 11 ä¸­çš„Lambdaè¡¨è¾¾å¼ç”¨äºå®šä¹‰å¹¶åˆ›å»ºåŒ¿åçš„å‡½æ•°å¯¹è±¡ï¼Œä»¥ç®€åŒ–ç¼–ç¨‹å·¥ä½œã€‚</strong><br>
<code>auto fun1 = [&amp;](int v){ cout &lt;&lt; v + x + this-&gt;num &lt;&lt; endl; x = 3; };</code><br>
å¯ä»¥çœ‹åˆ°ä¸€ä¸ªlambdaè¡¨è¾¾å¼å¯ä»¥åˆ†ä¸º5ä¸ªéƒ¨åˆ†</p>
<blockquote>
<p>[å‡½æ•°å¯¹è±¡å‚æ•°]ã€(æ“ä½œç¬¦é‡è½½å‡½æ•°å‚æ•°)ã€mutableæˆ–exceptionå£°æ˜ã€-&gt;è¿”å›å€¼ç±»å‹ã€{ å‡½æ•°ä½“ }</p>
</blockquote>
<ul>
<li>å‡½æ•°å¯¹è±¡å‚æ•°åªèƒ½ä½¿ç”¨é‚£äº›åˆ°å®šä¹‰Lambdaä¸ºæ­¢æ—¶Lambdaæ‰€åœ¨ä½œç”¨èŒƒå›´å†…å¯è§çš„å±€éƒ¨å˜é‡ï¼ˆåŒ…æ‹¬Lambdaæ‰€åœ¨ç±»çš„thisï¼‰ã€‚å‡½æ•°å¯¹è±¡å‚æ•°æœ‰å‡ ç§å½¢å¼ è¿™é‡Œä¸å±•å¼€è¯´äº† æ„Ÿå…´è¶£çš„å¯ä»¥å»æ‰¾ä¸€ä¸‹</li>
<li>(æ“ä½œç¬¦é‡è½½å‡½æ•°å‚æ•°)ï¼Œæ ‡è¯†é‡è½½çš„()æ“ä½œç¬¦çš„å‚æ•°ï¼Œæ²¡æœ‰å‚æ•°æ—¶ï¼Œè¿™éƒ¨åˆ†å¯ä»¥çœç•¥ã€‚å‚æ•°å¯ä»¥é€šè¿‡æŒ‰å€¼ï¼ˆå¦‚ï¼š(a, b)ï¼‰å’ŒæŒ‰å¼•ç”¨ï¼ˆå¦‚ï¼š(&amp;a, &amp;b)ï¼‰ä¸¤ç§æ–¹å¼è¿›è¡Œä¼ é€’ã€‚</li>
<li>mutableæˆ–exceptionå£°æ˜ï¼Œè¿™éƒ¨åˆ†å¯ä»¥çœç•¥ã€‚æŒ‰å€¼ä¼ é€’å‡½æ•°å¯¹è±¡å‚æ•°æ—¶ï¼ŒåŠ ä¸Šmutableä¿®é¥°ç¬¦åï¼Œå¯ä»¥ä¿®æ”¹æŒ‰å€¼ä¼ é€’è¿›æ¥çš„æ‹·è´ï¼ˆæ³¨æ„æ˜¯èƒ½ä¿®æ”¹æ‹·è´ï¼Œè€Œä¸æ˜¯å€¼æœ¬èº«ï¼‰ã€‚<br>
exceptionå£°æ˜ç”¨äºæŒ‡å®šå‡½æ•°æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå¦‚æŠ›å‡ºæ•´æ•°ç±»å‹çš„å¼‚å¸¸ï¼Œå¯ä»¥ä½¿ç”¨throw(int)ã€‚</li>
<li>-&gt;è¿”å›å€¼ç±»å‹ï¼Œæ ‡è¯†å‡½æ•°è¿”å›å€¼çš„ç±»å‹ï¼Œå½“è¿”å›å€¼ä¸ºvoidï¼Œæˆ–è€…å‡½æ•°ä½“ä¸­åªæœ‰ä¸€å¤„returnçš„åœ°æ–¹ï¼ˆæ­¤æ—¶ç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨æ–­å‡ºè¿”å›å€¼ç±»å‹ï¼‰æ—¶ï¼Œè¿™éƒ¨åˆ†å¯ä»¥çœç•¥ã€‚</li>
<li>{ å‡½æ•°ä½“ }ï¼Œæ ‡è¯†å‡½æ•°çš„å®ç°ï¼Œè¿™éƒ¨åˆ†ä¸èƒ½çœç•¥ï¼Œä½†å‡½æ•°ä½“å¯ä»¥ä¸ºç©ºã€‚</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å¼€æºåè®®]]></title>
        <id>https://wukongun.github.io/post/kai-yuan-xie-yi/</id>
        <link href="https://wukongun.github.io/post/kai-yuan-xie-yi/">
        </link>
        <updated>2015-05-13T02:25:49.000Z</updated>
        <content type="html"><![CDATA[<!-- more -->
<h2 id="å¼€æºåè®®çš„ä½¿ç”¨-å¯ä»¥çœ‹ä¸‹å›¾-å…·ä½“åè®®éœ€è¦å“ªäº›çº¦æŸ">å¼€æºåè®®çš„ä½¿ç”¨ å¯ä»¥çœ‹ä¸‹å›¾ å…·ä½“åè®®éœ€è¦å“ªäº›çº¦æŸ</h2>
<figure data-type="image" tabindex="1"><img src="https://wukongun.github.io/post-images/1590460057155.png" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[iOSåº”â½¤æ£€æŸ¥æ›´æ–°çš„æ–¹æ³• é™„ä»£ç ]]></title>
        <id>https://wukongun.github.io/post/yingyongjianchagengxin/</id>
        <link href="https://wukongun.github.io/post/yingyongjianchagengxin/">
        </link>
        <updated>2014-07-07T02:52:20.000Z</updated>
        <content type="html"><![CDATA[<p>è™½ç„¶App Storeèƒ½å¤Ÿæé†’â½¤ç”¨æˆ·è½¯ä»¶æ›´æ–°ï¼Œä½†å¾ˆå¤šâ½¤ç”¨æˆ·ä¸ä¼šä¸»åŠ¨å»æ›´æ–°â¼€ä¸€â¼¤å¤§å †çš„è½¯ä»¶(æˆ‘æœºå™¨ä¸Šå¾…æ›´æ–°çš„ è½¯ä»¶åœ¨100ä¸ªå·¦å³)ã€‚å¦‚æœåœ¨è½¯ä»¶å¼€å¯æ—¶æé†’â½¤ç”¨æˆ·æ›´æ–° æˆ–è€… æ›´å¤šä¸­è®¾ç½®â€œæ£€æŸ¥æ›´æ–°â€é¡¹ï¼Œæ•ˆæœä¼šå¥½å¾ˆå¤šã€‚ é€šå¸¸çš„åšæ³•æ˜¯åœ¨â¾ƒè‡ªâ¼°å·±çš„æœåŠ¡å™¨ä¸Šè®°å½•æœ€æ–°ç‰ˆæœ¬å·ï¼Œä»iOSå®¢æˆ·ç«¯è¯·æ±‚ï¼Œä¸æœ¬åœ°ç‰ˆæœ¬å·â½æ¯”è¾ƒï¼Œä¸åŒåˆ™æâ½°ç¤ºæ›´ æ–°ã€‚è¿™ç§åšæ³•ç®€å•ï¼Œç¼ºç‚¹æ˜¯éœ€è¦å•ç‹¬çš„æœåŠ¡å™¨â½€æ”¯æŒã€‚ é€šè¿‡æŸ¥é˜…ç›¸å…³â½‚æ–‡ç« ï¼Œæ‰¾åˆ°äº†å¦‚ä¸‹â½…æ–¹æ³•ï¼Œä¸ä¸Šè¿°â½…æ–¹æ³•ç±»ä¼¼ï¼Œä¸è¿‡ä¸éœ€è¦å¦å¤–çš„æœåŠ¡å™¨â½€æ”¯æŒã€‚æ­¤ä¸ºæ£€æŸ¥æ›´æ–°çš„æœ€ ä¼˜â½…æ–¹æ³•ã€‚</p>
<pre><code class="language-c++">NSString *version = @&quot;&quot;;
NSURL *url = [NSURL URLWithString:@&quot;http://itunes.apple.com/lookup?id=954270&quot;]; versionRequest = [ASIFormDataRequest requestWithURL:url];
[versionRequest setRequestMethod:@&quot;GET&quot;];
[versionRequest setDelegate:self];
[versionRequest setTimeOutSeconds:150];
[versionRequest addRequestHeader:@&quot;Content-Type&quot; value:@&quot;application/json&quot;]; [versionRequest startSynchronous];
//Response string of our REST call
NSString* jsonResponseString = [versionRequest responseString];
NSDictionary *loginAuthenticationResponse = [jsonResponseString objectFromJSONString]; NSArray *configData = [loginAuthenticationResponse valueForKey:@&quot;results&quot;];
for (id config in configData)
{
version = [config valueForKey:@&quot;version&quot;]; }
//Check your version with the version in app store
if (![version isEqualToString:[itsUserDefaults objectForKey:@&quot;version&quot;]]) {
ProAlertView *createUserResponseAlert = [[ProAlertView alloc] initWithTitle:@&quot;New Version!!&quot; message: @&quot;A new v ersion of app is available to download&quot; delegate:self cancelButtonTitle:@&quot;Cancel&quot; otherButtonTitles: @&quot;Download&quot;, nil ];
[createUserResponseAlert show];
[createUserResponseAlert release]; }
</code></pre>
<pre><code class="language-objective-c"> (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex { // the user clicked one of the OK/Cancel buttons
if (buttonIndex == 1)
{
NSString *iTunesLink = @&quot;itms-apps://phobos.apple.com/WebObjects/MZStore.woa/wa/viewSoftwareUpdate?id =&lt;appid&gt;&amp;mt=8&quot;;
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:iTunesLink]]; }
}
</code></pre>
<p>è¯·æ±‚http://itunes.apple.com/lookup?id=954270è¿”å›çš„æ•°æ®ç»™å‡ºçš„versionä¸º2.3, ä¸æœ¬åœ°å®¢æˆ·ç«¯ç‰ˆæœ¬å·â½æ¯”è¾ƒï¼Œ<br>
å³å¯åˆ¤æ–­æœ‰â½†æ— æ›´æ–°ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[iOS sdkçš„ md5 ç®—æ³•]]></title>
        <id>https://wukongun.github.io/post/ios-sdk-de-md5-suan-fa/</id>
        <link href="https://wukongun.github.io/post/ios-sdk-de-md5-suan-fa/">
        </link>
        <updated>2012-11-07T05:58:32.000Z</updated>
        <content type="html"><![CDATA[<pre><code class="language-c++">#import &lt;CommonCrypto/CommonDigest.h&gt;
+ (NSString *)md5HexDigest:(NSString*)input {
const char* str = [input UTF8String];
unsigned char result[CC_MD5_DIGEST_LENGTH];
CC_MD5(str, strlen(str), result);
NSMutableString *ret = [NSMutableString stringWithCapacity:CC_MD5_DIGEST_LENGTH*2];//
for(int i = 0; i&lt;CC_MD5_DIGEST_LENGTH; i++) {
//    [ret appendFormat:@&quot;%02x&quot;,result[i]]; å¤§å†™
    [ret appendFormat:@&quot;%x&quot;,result[i]]; //å°å†™
}
    return ret;
}
</code></pre>
]]></content>
    </entry>
</feed>